# Login/Signup System

A complete authentication system built with Node.js, Express, MongoDB, and integrated with ChatGPT for intelligent assistance.

## 🚀 Features

- **Complete Authentication System**: Secure login/signup with JWT tokens
- **MongoDB Integration**: User data management with fallback to in-memory storage
- **Profile Dashboard**: User profiles with file upload capabilities
- **AWS S3 Integration**: Cloud storage for profile images with automatic fallback to local storage
- **ChatGPT Integration**: AI-powered chatbot for user assistance
- **Admin Dashboard**: Administrative interface for user management
- **reCAPTCHA Protection**: Spam and bot protection
- **Responsive Design**: Mobile-friendly interface

## 🛠️ Tech Stack

- **Backend**: Node.js, Express.js
- **Database**: MongoDB (with Mongoose)
- **Authentication**: JWT, bcryptjs
- **Frontend**: Handlebars (HBS), CSS3
- **AI Integration**: OpenAI GPT
- **File Upload**: Multer, AWS S3
- **Security**: reCAPTCHA, HTTP-only cookies
- **Cloud Storage**: AWS S3 with local fallback

## 📦 Installation

1. **Clone the repository**:
   ```bash
   git clone https://github.com/bakora28/login-signup-system.git
   cd login-signup-system
   ```

2. **Install dependencies**:
   ```bash
   npm install
   ```

3. **Set up environment variables**:
   Create a `.env` file in the root directory:
   ```env
   # Database
   MONGODB_URI=your_mongodb_connection_string
   
   # JWT Secret
   JWT_SECRET=your_super_secret_jwt_key
   
   # OpenAI API
   OPENAI_API_KEY=your_openai_api_key
   
   # reCAPTCHA
   RECAPTCHA_SITE_KEY=your_recaptcha_site_key
   RECAPTCHA_SECRET_KEY=your_recaptcha_secret_key
   
   # AWS S3 (Optional - for cloud storage)
   AWS_ACCESS_KEY_ID=your_aws_access_key_id
   AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key
   AWS_REGION=us-east-1
   AWS_S3_BUCKET_NAME=your_s3_bucket_name
   
   # Port (optional)
   PORT=3002
   ```

4. **Start the application**:
   ```bash
   # Development mode
   npm run dev
   
   # Production mode
   npm start
   ```

## ☁️ AWS S3 Setup (Optional)

For cloud storage of profile images, follow the detailed setup guide in [AWS_S3_SETUP.md](./AWS_S3_SETUP.md).

**Quick Setup:**
1. Create an S3 bucket in AWS Console
2. Create an IAM user with S3 permissions
3. Add AWS credentials to your `.env` file
4. Test configuration: `node test-s3-config.js`

**Benefits:**
- Global CDN access for faster image loading
- Reduced server storage requirements
- Automatic fallback to local storage if S3 unavailable
- Scalable cloud storage solution

## 🌐 Deployment on Render

### Prerequisites
1. Push your code to GitHub
2. Have a Render account

### Deployment Steps

1. **Go to [Render Dashboard](https://dashboard.render.com/)**

2. **Create a New Web Service**:
   - Click "New" → "Web Service"
   - Connect your GitHub repository: `https://github.com/bakora28/login-signup-system`

3. **Configure the service**:
   - **Name**: `login-signup-system`
   - **Environment**: `Node`
   - **Build Command**: `npm install`
   - **Start Command**: `npm start`

4. **Set Environment Variables**:
   Add the following environment variables in Render:
   ```
   NODE_ENV=production
   JWT_SECRET=[Auto-generated by Render]
   MONGODB_URI=[Your MongoDB connection string]
   OPENAI_API_KEY=[Your OpenAI API key]
   RECAPTCHA_SITE_KEY=[Your reCAPTCHA site key]
   RECAPTCHA_SECRET_KEY=[Your reCAPTCHA secret key]
   
   # AWS S3 (Optional)
   AWS_ACCESS_KEY_ID=[Your AWS access key]
   AWS_SECRET_ACCESS_KEY=[Your AWS secret key]
   AWS_REGION=[Your AWS region]
   AWS_S3_BUCKET_NAME=[Your S3 bucket name]
   ```

5. **Deploy**:
   - Click "Create Web Service"
   - Render will automatically deploy your application

## 📁 File Storage Strategy

The system automatically handles file storage with intelligent fallback:

- **Primary Storage**: AWS S3 (when configured)
- **Fallback Storage**: Local file system (always available)
- **Automatic Cleanup**: Old files are automatically deleted when replaced
- **File Validation**: Images only, 5MB size limit
- **Metadata Tracking**: File size, type, upload date, and storage location

## 🔧 Configuration Files

- **`src/aws-s3-config.js`**: AWS S3 configuration and client setup
- **`src/upload-config.js`**: File upload configuration with S3 support
- **`src/services/S3Service.js`**: S3 file operations service
- **`src/services/ProfileMongoService.js`**: MongoDB profile operations with S3 integration
- **`test-s3-config.js`**: S3 configuration test script

## 📖 Additional Documentation

- [AWS S3 Setup Guide](./AWS_S3_SETUP.md) - Complete S3 integration guide
- [MongoDB Setup Guide](./MONGODB_SETUP.md) - Database configuration
- [ChatGPT Integration](./CHATGPT_SETUP.md) - AI chatbot setup
- [reCAPTCHA Setup](./RECAPTCHA_SETUP.md) - Security configuration

## 📱 Available Routes

- **Home**: `/`
- **Signup**: `/signup`
- **Login**: `/login`
- **Profile Dashboard**: `/profile/dashboard`
- **Admin Login**: `/admin/login`
- **Admin Dashboard**: `/admin/dashboard`
- **Chatbot API**: `/api/chatbot`

## 🤖 Chatbot Features

- Password reset assistance
- Account creation help
- Login troubleshooting
- Technical support
- FAQ responses

## 📁 Project Structure

```
├── src/
│   ├── index.js              # Main application file
│   ├── database.js           # Database connection
│   ├── mongodb-storage.js    # MongoDB user storage
│   ├── storage.js            # In-memory storage fallback
│   ├── profile-routes.js     # Profile management routes
│   ├── chatbot-routes.js     # Chatbot API routes
│   ├── admin-routes.js       # Admin panel routes
│   ├── models/               # Database models
│   └── services/             # Business logic services
├── templates/                # Handlebars templates
├── public/                   # Static assets (CSS, JS, images)
├── data/                     # User data storage (development)
├── aws-lambda/               # AWS Lambda functions
└── docs/                     # Setup documentation
```

## 🔒 Security Features

- JWT authentication with HTTP-only cookies
- Password hashing with bcryptjs
- reCAPTCHA integration
- Secure file upload handling
- Environment variable protection

## 🆘 Troubleshooting

### Common Issues

1. **MongoDB Connection Failed**:
   - Check your `MONGODB_URI` environment variable
   - Ensure your MongoDB server is running
   - The app will fallback to in-memory storage

2. **Chatbot Not Working**:
   - Verify your `OPENAI_API_KEY` is set correctly
   - Check the OpenAI API console for usage limits

3. **File Upload Issues**:
   - Ensure the `public/uploads/profile-pictures/` directory exists
   - Check file permissions

### Render-Specific Issues

1. **Build Failing**:
   - Check the build logs in Render dashboard
   - Ensure all dependencies are in `package.json`

2. **App Not Starting**:
   - Verify the start command is `npm start`
   - Check if `PORT` environment variable is being used correctly

## 📚 Documentation

- [ChatGPT Setup Guide](CHATGPT_SETUP.md)
- [MongoDB Integration Guide](MONGODB_SETUP.md)
- [reCAPTCHA Setup Guide](RECAPTCHA_SETUP.md)

## 🤝 Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Submit a pull request

## 📄 License

This project is open source and available under the [MIT License](LICENSE).

## 🌟 Demo

Visit the live demo: [Your Render URL will be here after deployment]

---

**Need Help?** Contact the development team or use the built-in chatbot for assistance!
